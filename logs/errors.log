2024-10-02 19:26:21,070 - ERROR - Exception on request GET /devices
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlite3.OperationalError: no such column: devices.is_banned

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart_auth/globals.py", line 64, in wrapper
    return await current_app.ensure_async(func)(*args, **kwargs)
  File "/home/albinr/git/bth/c2app/server/routes.py", line 85, in devices
    result = await session.execute(select(Device))
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 461, in execute
    result = await greenlet_spawn(
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 147, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 298, in _handle_exception
    raise error
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 129, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/aiosqlite/cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/aiosqlite/cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/aiosqlite/core.py", line 132, in _execute
    return await future
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/aiosqlite/core.py", line 115, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: devices.is_banned
[SQL: SELECT devices.id, devices.hardware_id, devices.device_name, devices.os_version, devices.geo_location, devices.installed_apps, devices.timestamp, devices.last_heartbeat, devices.can_view_info, devices.is_banned 
FROM devices]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-03 15:24:39,739 - ERROR - Exception on request POST /device/1/toggle_ban
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart_auth/globals.py", line 64, in wrapper
    return await current_app.ensure_async(func)(*args, **kwargs)
  File "/home/albinr/git/bth/c2app/server/routes.py", line 129, in post_toggle_ban_device
    current_app.logger.info(f"User {current_user.username} {action} device {device.device_name}.")
AttributeError: 'AuthUser' object has no attribute 'username'
2024-10-03 15:53:02,983 - ERROR - Exception on request POST /device/1/toggle_ban
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app/server/venv/lib/python3.10/site-packages/quart_auth/globals.py", line 64, in wrapper
    return await current_app.ensure_async(func)(*args, **kwargs)
  File "/home/albinr/git/bth/c2app/server/routes.py", line 129, in post_toggle_ban_device
    current_app.logger.info(f"User {current_user.username} {action} device {device.device_name}.")
AttributeError: 'AuthUser' object has no attribute 'username'
2024-10-09 18:59:29,272 - ERROR - An error occurred: 'NoneType' object has no attribute 'get'
2024-10-10 12:24:44,095 - ERROR - Exception on request POST /device/1/toggle_restrict
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart_auth/globals.py", line 64, in wrapper
    return await current_app.ensure_async(func)(*args, **kwargs)
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes.py", line 142, in post_toggle_restrict_device
    device.can_view_info = not device.can_view_info
AttributeError: 'Device' object has no attribute 'can_view_info'
2024-10-10 17:07:39,761 - ERROR - An error occurred: 'coroutine' object has no attribute 'get'
2024-10-10 17:09:06,223 - ERROR - An error occurred: 'coroutine' object has no attribute 'get'
2024-10-10 17:09:38,315 - ERROR - An error occurred: 'coroutine' object has no attribute 'get'
2024-10-10 17:11:17,638 - ERROR - An error occurred: [Errno 2] No such file or directory: 'uploads/55c97bf4-7bea-11ef-a011-efb03faa974e_test.txt'
2024-10-10 17:11:45,902 - ERROR - An error occurred: object bytes can't be used in 'await' expression
2024-10-10 17:12:19,585 - ERROR - An error occurred: object bytes can't be used in 'await' expression
2024-10-10 17:13:38,961 - ERROR - An error occurred: object bytes can't be used in 'await' expression
2024-10-10 17:36:22,814 - ERROR - Exception on request GET /
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/main.py", line 7, in main
    return await render_template("index.html")
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/templating.py", line 47, in render_template
    return await _render(template, context, current_app._get_current_object())  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/templating.py", line 66, in _render
    rendered_template = await template.render_async(context)
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 1327, in render_async
    return self.environment.handle_exception()
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 1324, in <listcomp>
    [n async for n in self.root_render_func(ctx)]  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/templates/index.html", line 1, in top-level template code
    {% include 'header.html' %}
  File "/home/albinr/git/bth/c2app-proj/c2app-server/templates/header.html", line 21, in top-level template code
    <li {%- if request.path=="/" %} class="active" {% endif %}><a href="{{ url_for('routes.main') }}"><img
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 734, in url_for
    return self.handle_url_build_error(error, endpoint, values)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 732, in url_for
    url = url_adapter.build(endpoint, values, method=_method, force_external=_external)
  File "/home/albinr/.local/lib/python3.10/site-packages/werkzeug/routing/map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'routes.main'. Did you mean 'routes.main_routes.main' instead?
2024-10-10 17:38:51,981 - ERROR - Exception on request GET /login
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/auth.py", line 60, in login
    return await render_template("login.html")
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/templating.py", line 47, in render_template
    return await _render(template, context, current_app._get_current_object())  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/templating.py", line 66, in _render
    rendered_template = await template.render_async(context)
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 1327, in render_async
    return self.environment.handle_exception()
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 1324, in <listcomp>
    [n async for n in self.root_render_func(ctx)]  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/templates/login.html", line 1, in top-level template code
    {% include 'header.html' %}
  File "/home/albinr/git/bth/c2app-proj/c2app-server/templates/header.html", line 21, in top-level template code
    <li {%- if request.path=="/" %} class="active" {% endif %}><a href="{{ url_for('main_routes.main') }}"><img
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 734, in url_for
    return self.handle_url_build_error(error, endpoint, values)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 732, in url_for
    url = url_adapter.build(endpoint, values, method=_method, force_external=_external)
  File "/home/albinr/.local/lib/python3.10/site-packages/werkzeug/routing/map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main_routes.main'. Did you mean 'routes.main_routes.main' instead?
2024-10-10 17:38:56,340 - ERROR - Exception on request GET /
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/main.py", line 7, in main
    return await render_template("index.html")
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/templating.py", line 47, in render_template
    return await _render(template, context, current_app._get_current_object())  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/templating.py", line 66, in _render
    rendered_template = await template.render_async(context)
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 1327, in render_async
    return self.environment.handle_exception()
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 1324, in <listcomp>
    [n async for n in self.root_render_func(ctx)]  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/templates/index.html", line 1, in top-level template code
    {% include 'header.html' %}
  File "/home/albinr/git/bth/c2app-proj/c2app-server/templates/header.html", line 21, in top-level template code
    <li {%- if request.path=="/" %} class="active" {% endif %}><a href="{{ url_for('main_routes.main') }}"><img
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 734, in url_for
    return self.handle_url_build_error(error, endpoint, values)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 732, in url_for
    url = url_adapter.build(endpoint, values, method=_method, force_external=_external)
  File "/home/albinr/.local/lib/python3.10/site-packages/werkzeug/routing/map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'main_routes.main'. Did you mean 'routes.main_routes.main' instead?
2024-10-10 17:39:21,473 - ERROR - Exception on request GET /
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/main.py", line 7, in main
    return await render_template("index.html")
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/templating.py", line 47, in render_template
    return await _render(template, context, current_app._get_current_object())  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/templating.py", line 66, in _render
    rendered_template = await template.render_async(context)
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 1327, in render_async
    return self.environment.handle_exception()
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 1324, in <listcomp>
    [n async for n in self.root_render_func(ctx)]  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/templates/index.html", line 1, in top-level template code
    {% include 'header.html' %}
  File "/home/albinr/git/bth/c2app-proj/c2app-server/templates/header.html", line 31, in top-level template code
    href="{{ url_for('routes.login') }}">Login</a></li>
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 734, in url_for
    return self.handle_url_build_error(error, endpoint, values)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 732, in url_for
    url = url_adapter.build(endpoint, values, method=_method, force_external=_external)
  File "/home/albinr/.local/lib/python3.10/site-packages/werkzeug/routing/map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'routes.login'. Did you mean 'routes.auth_routes.login' instead?
2024-10-10 17:39:47,394 - ERROR - Exception on request GET /login
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/auth.py", line 60, in login
    return await render_template("login.html")
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/templating.py", line 47, in render_template
    return await _render(template, context, current_app._get_current_object())  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/templating.py", line 66, in _render
    rendered_template = await template.render_async(context)
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 1327, in render_async
    return self.environment.handle_exception()
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 1324, in <listcomp>
    [n async for n in self.root_render_func(ctx)]  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/templates/login.html", line 6, in top-level template code
    <form action="{{ url_for('routes.login') }}" class="form" method="POST">
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 734, in url_for
    return self.handle_url_build_error(error, endpoint, values)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 732, in url_for
    url = url_adapter.build(endpoint, values, method=_method, force_external=_external)
  File "/home/albinr/.local/lib/python3.10/site-packages/werkzeug/routing/map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'routes.login'. Did you mean 'routes.auth_routes.login' instead?
2024-10-10 17:40:48,457 - ERROR - Exception on request GET /login
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/auth.py", line 60, in login
    return await render_template("login.html")
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/templating.py", line 47, in render_template
    return await _render(template, context, current_app._get_current_object())  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/templating.py", line 66, in _render
    rendered_template = await template.render_async(context)
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 1327, in render_async
    return self.environment.handle_exception()
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 1324, in <listcomp>
    [n async for n in self.root_render_func(ctx)]  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/templates/login.html", line 6, in top-level template code
    <form action="{{ url_for('routes.login') }}" class="form" method="POST">
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 734, in url_for
    return self.handle_url_build_error(error, endpoint, values)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 732, in url_for
    url = url_adapter.build(endpoint, values, method=_method, force_external=_external)
  File "/home/albinr/.local/lib/python3.10/site-packages/werkzeug/routing/map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'routes.login'. Did you mean 'routes.auth_routes.login' instead?
2024-10-10 17:41:28,951 - ERROR - Exception on request POST /login
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/auth.py", line 55, in login
    return redirect(url_for('routes.devices'))
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/helpers.py", line 180, in url_for
    return current_app.url_for(
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 734, in url_for
    return self.handle_url_build_error(error, endpoint, values)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 732, in url_for
    url = url_adapter.build(endpoint, values, method=_method, force_external=_external)
  File "/home/albinr/.local/lib/python3.10/site-packages/werkzeug/routing/map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'routes.devices'. Did you mean 'routes.device_routes.devices' instead?
2024-10-10 17:44:15,597 - ERROR - Exception on request GET /devices
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart_auth/globals.py", line 64, in wrapper
    return await current_app.ensure_async(func)(*args, **kwargs)
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 25, in devices
    return await render_template("devices.html", devices=devices)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/templating.py", line 47, in render_template
    return await _render(template, context, current_app._get_current_object())  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/templating.py", line 66, in _render
    rendered_template = await template.render_async(context)
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 1327, in render_async
    return self.environment.handle_exception()
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 1324, in <listcomp>
    [n async for n in self.root_render_func(ctx)]  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/templates/devices.html", line 21, in top-level template code
    <td><a href="{{ url_for('routes.single_device', id=device.id) }}">{{ device.device_name }}</a></td>
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 734, in url_for
    return self.handle_url_build_error(error, endpoint, values)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 732, in url_for
    url = url_adapter.build(endpoint, values, method=_method, force_external=_external)
  File "/home/albinr/.local/lib/python3.10/site-packages/werkzeug/routing/map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'routes.single_device' with values ['id']. Did you mean 'routes.device_routes.single_device' instead?
2024-10-10 17:45:24,919 - ERROR - Exception on request POST /device/5/toggle_watchlist
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart_auth/globals.py", line 64, in wrapper
    return await current_app.ensure_async(func)(*args, **kwargs)
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 58, in post_toggle_watchlist_device
    current_app.logger.info(f"User {current_user.auth_id} {action} the watchlist for device {device.device_name}.")
NameError: name 'current_user' is not defined. Did you mean: 'current_app'?
2024-10-10 17:46:28,763 - ERROR - Exception on request POST /device/6/toggle_watchlist
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart_auth/globals.py", line 64, in wrapper
    return await current_app.ensure_async(func)(*args, **kwargs)
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 58, in post_toggle_watchlist_device
    current_app.logger.info(f"User {current_user.auth_id} {action} the watchlist for device {device.device_name}.")
NameError: name 'current_user' is not defined. Did you mean: 'current_app'?
2024-10-10 17:48:49,412 - ERROR - Exception on request POST /device/1/toggle_watchlist
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart_auth/globals.py", line 64, in wrapper
    return await current_app.ensure_async(func)(*args, **kwargs)
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 62, in post_toggle_watchlist_device
    return redirect(url_for('routes.devices'))
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/helpers.py", line 180, in url_for
    return current_app.url_for(
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 734, in url_for
    return self.handle_url_build_error(error, endpoint, values)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 732, in url_for
    url = url_adapter.build(endpoint, values, method=_method, force_external=_external)
  File "/home/albinr/.local/lib/python3.10/site-packages/werkzeug/routing/map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'routes.devices'. Did you mean 'routes.device_routes.devices' instead?
2024-10-10 17:50:50,064 - ERROR - Exception on request GET /devices/1
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart_auth/globals.py", line 64, in wrapper
    return await current_app.ensure_async(func)(*args, **kwargs)
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 36, in single_device
    return await render_template("single-device.html", device=device)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/templating.py", line 47, in render_template
    return await _render(template, context, current_app._get_current_object())  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/templating.py", line 66, in _render
    rendered_template = await template.render_async(context)
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 1327, in render_async
    return self.environment.handle_exception()
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 939, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/albinr/.local/lib/python3.10/site-packages/jinja2/environment.py", line 1324, in <listcomp>
    [n async for n in self.root_render_func(ctx)]  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/templates/single-device.html", line 26, in top-level template code
    <form action="{{ url_for('routes.post_delete_device', id=device.id) }}" method="POST" style="margin-top: 10px;">
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 734, in url_for
    return self.handle_url_build_error(error, endpoint, values)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 732, in url_for
    url = url_adapter.build(endpoint, values, method=_method, force_external=_external)
  File "/home/albinr/.local/lib/python3.10/site-packages/werkzeug/routing/map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'routes.post_delete_device' with values ['id']. Did you mean 'routes.device_routes.post_delete_device' instead?
2024-10-10 17:52:33,780 - ERROR - Exception on websocket /ws/logs
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1415, in handle_websocket
    return await self.full_dispatch_websocket(websocket_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1463, in full_dispatch_websocket
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1461, in full_dispatch_websocket
    result = await self.dispatch_websocket(websocket_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1551, in dispatch_websocket
    return await self.ensure_async(handler)(**websocket_.view_args)  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart_auth/globals.py", line 64, in wrapper
    return await current_app.ensure_async(func)(*args, **kwargs)
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/logs.py", line 21, in ws_logs
    log_connections.add(websocket._get_current_object())
NameError: name 'log_connections' is not defined
2024-10-10 17:54:48,294 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:54:48,295 - ERROR - Exception on request POST /device/heartbeat
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 172, in api_device_heartbeat
    device.last_heartbeat = func.current_timestamp()
NameError: name 'func' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 180, in api_device_heartbeat
    return jsonify({"error": f"An error occurred: {str(e)}"}), 500
NameError: name 'jsonify' is not defined
2024-10-10 17:54:48,299 - ERROR - Exception on request POST /device
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 133, in api_add_device
    return jsonify({"error": "A device with this hardware ID already exists."}), 400
NameError: name 'jsonify' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 149, in api_add_device
    return jsonify({"error": f"An error occurred: {str(e)}"}), 400
NameError: name 'jsonify' is not defined
2024-10-10 17:54:53,408 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:54:53,409 - ERROR - Exception on request POST /device/heartbeat
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 172, in api_device_heartbeat
    device.last_heartbeat = func.current_timestamp()
NameError: name 'func' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 180, in api_device_heartbeat
    return jsonify({"error": f"An error occurred: {str(e)}"}), 500
NameError: name 'jsonify' is not defined
2024-10-10 17:54:58,433 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:54:58,433 - ERROR - Exception on request POST /device/heartbeat
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 172, in api_device_heartbeat
    device.last_heartbeat = func.current_timestamp()
NameError: name 'func' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 180, in api_device_heartbeat
    return jsonify({"error": f"An error occurred: {str(e)}"}), 500
NameError: name 'jsonify' is not defined
2024-10-10 17:55:03,466 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:55:03,467 - ERROR - Exception on request POST /device/heartbeat
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 172, in api_device_heartbeat
    device.last_heartbeat = func.current_timestamp()
NameError: name 'func' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 180, in api_device_heartbeat
    return jsonify({"error": f"An error occurred: {str(e)}"}), 500
NameError: name 'jsonify' is not defined
2024-10-10 17:55:08,497 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:55:08,498 - ERROR - Exception on request POST /device/heartbeat
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 172, in api_device_heartbeat
    device.last_heartbeat = func.current_timestamp()
NameError: name 'func' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 180, in api_device_heartbeat
    return jsonify({"error": f"An error occurred: {str(e)}"}), 500
NameError: name 'jsonify' is not defined
2024-10-10 17:55:13,527 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:55:13,528 - ERROR - Exception on request POST /device/heartbeat
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 172, in api_device_heartbeat
    device.last_heartbeat = func.current_timestamp()
NameError: name 'func' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 180, in api_device_heartbeat
    return jsonify({"error": f"An error occurred: {str(e)}"}), 500
NameError: name 'jsonify' is not defined
2024-10-10 17:55:18,552 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:55:18,553 - ERROR - Exception on request POST /device/heartbeat
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 172, in api_device_heartbeat
    device.last_heartbeat = func.current_timestamp()
NameError: name 'func' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 180, in api_device_heartbeat
    return jsonify({"error": f"An error occurred: {str(e)}"}), 500
NameError: name 'jsonify' is not defined
2024-10-10 17:55:23,574 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:55:23,575 - ERROR - Exception on request POST /device/heartbeat
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 172, in api_device_heartbeat
    device.last_heartbeat = func.current_timestamp()
NameError: name 'func' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 180, in api_device_heartbeat
    return jsonify({"error": f"An error occurred: {str(e)}"}), 500
NameError: name 'jsonify' is not defined
2024-10-10 17:55:28,590 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:55:28,591 - ERROR - Exception on request POST /device/heartbeat
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 172, in api_device_heartbeat
    device.last_heartbeat = func.current_timestamp()
NameError: name 'func' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 180, in api_device_heartbeat
    return jsonify({"error": f"An error occurred: {str(e)}"}), 500
NameError: name 'jsonify' is not defined
2024-10-10 17:55:33,606 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:55:33,606 - ERROR - Exception on request POST /device/heartbeat
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 172, in api_device_heartbeat
    device.last_heartbeat = func.current_timestamp()
NameError: name 'func' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 180, in api_device_heartbeat
    return jsonify({"error": f"An error occurred: {str(e)}"}), 500
NameError: name 'jsonify' is not defined
2024-10-10 17:55:38,617 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:55:38,618 - ERROR - Exception on request POST /device/heartbeat
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 172, in api_device_heartbeat
    device.last_heartbeat = func.current_timestamp()
NameError: name 'func' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 180, in api_device_heartbeat
    return jsonify({"error": f"An error occurred: {str(e)}"}), 500
NameError: name 'jsonify' is not defined
2024-10-10 17:55:43,638 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:55:43,639 - ERROR - Exception on request POST /device/heartbeat
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 172, in api_device_heartbeat
    device.last_heartbeat = func.current_timestamp()
NameError: name 'func' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 180, in api_device_heartbeat
    return jsonify({"error": f"An error occurred: {str(e)}"}), 500
NameError: name 'jsonify' is not defined
2024-10-10 17:55:48,656 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:55:48,657 - ERROR - Exception on request POST /device/heartbeat
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 172, in api_device_heartbeat
    device.last_heartbeat = func.current_timestamp()
NameError: name 'func' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 180, in api_device_heartbeat
    return jsonify({"error": f"An error occurred: {str(e)}"}), 500
NameError: name 'jsonify' is not defined
2024-10-10 17:55:53,673 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:55:53,673 - ERROR - Exception on request POST /device/heartbeat
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 172, in api_device_heartbeat
    device.last_heartbeat = func.current_timestamp()
NameError: name 'func' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 180, in api_device_heartbeat
    return jsonify({"error": f"An error occurred: {str(e)}"}), 500
NameError: name 'jsonify' is not defined
2024-10-10 17:55:58,698 - ERROR - An error occurred: name 'jsonify' is not defined
2024-10-10 17:55:58,699 - ERROR - Exception on request POST /device/heartbeat
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 170, in api_device_heartbeat
    return jsonify({"error": "This device is off the watchlist."}), 403
NameError: name 'jsonify' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 180, in api_device_heartbeat
    return jsonify({"error": f"An error occurred: {str(e)}"}), 500
NameError: name 'jsonify' is not defined
2024-10-10 17:56:03,724 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:56:03,725 - ERROR - Exception on request POST /device/heartbeat
Traceback (most recent call last):
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 172, in api_device_heartbeat
    device.last_heartbeat = func.current_timestamp()
NameError: name 'func' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/devices.py", line 180, in api_device_heartbeat
    return jsonify({"error": f"An error occurred: {str(e)}"}), 500
NameError: name 'jsonify' is not defined
2024-10-10 17:56:50,575 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:56:55,691 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:57:00,701 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:57:05,721 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:57:10,730 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:57:15,743 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:57:20,759 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:57:25,772 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:57:30,792 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:57:35,811 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:57:40,828 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:57:45,844 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:57:50,857 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:57:55,872 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:58:00,887 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:58:05,903 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:58:10,917 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:58:15,931 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:58:20,951 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:58:25,988 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:58:31,019 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:58:36,035 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:58:41,045 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:58:46,059 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:58:51,074 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 17:58:56,097 - ERROR - An error occurred: name 'func' is not defined
2024-10-10 18:06:55,240 - ERROR - Exception on request GET /logout
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1029, in handle_user_exception
    raise error
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart_auth/globals.py", line 64, in wrapper
    return await current_app.ensure_async(func)(*args, **kwargs)
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/auth.py", line 68, in logout
    return redirect(url_for('auth_routes.login'))
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/helpers.py", line 180, in url_for
    return current_app.url_for(
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 734, in url_for
    return self.handle_url_build_error(error, endpoint, values)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 732, in url_for
    url = url_adapter.build(endpoint, values, method=_method, force_external=_external)
  File "/home/albinr/.local/lib/python3.10/site-packages/werkzeug/routing/map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'auth_routes.login'. Did you mean 'routes.auth_routes.login' instead?
2024-10-10 18:07:42,637 - ERROR - Exception on request GET /logout
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart_auth/globals.py", line 62, in wrapper
    raise Unauthorized()
quart_auth.extension.Unauthorized: 401 Unauthorized: The server could not verify that you are authorized to access the URL requested. You either supplied the wrong credentials (e.g. a bad password), or your browser doesn't understand how to supply the credentials required.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1019, in handle_user_exception
    return await self.handle_http_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1004, in handle_http_exception
    return await self.ensure_async(handler)(error)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/auth.py", line 72, in redirect_to_login
    return redirect(url_for("auth_routes.login"))
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/helpers.py", line 180, in url_for
    return current_app.url_for(
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 734, in url_for
    return self.handle_url_build_error(error, endpoint, values)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 732, in url_for
    url = url_adapter.build(endpoint, values, method=_method, force_external=_external)
  File "/home/albinr/.local/lib/python3.10/site-packages/werkzeug/routing/map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'auth_routes.login'. Did you mean 'routes.auth_routes.login' instead?
2024-10-10 18:14:38,294 - ERROR - Exception on request GET /devices
Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1439, in full_dispatch_request
    result = await self.dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1535, in dispatch_request
    return await self.ensure_async(handler)(**request_.view_args)  # type: ignore
  File "/home/albinr/.local/lib/python3.10/site-packages/quart_auth/globals.py", line 62, in wrapper
    raise Unauthorized()
quart_auth.extension.Unauthorized: 401 Unauthorized: The server could not verify that you are authorized to access the URL requested. You either supplied the wrong credentials (e.g. a bad password), or your browser doesn't understand how to supply the credentials required.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1403, in handle_request
    return await self.full_dispatch_request(request_context)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1441, in full_dispatch_request
    result = await self.handle_user_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1019, in handle_user_exception
    return await self.handle_http_exception(error)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 1004, in handle_http_exception
    return await self.ensure_async(handler)(error)  # type: ignore
  File "/home/albinr/git/bth/c2app-proj/c2app-server/routes/__init__.py", line 15, in redirect_to_login
    return redirect(url_for("auth_routes.login"))
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/helpers.py", line 180, in url_for
    return current_app.url_for(
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 734, in url_for
    return self.handle_url_build_error(error, endpoint, values)
  File "/home/albinr/.local/lib/python3.10/site-packages/quart/app.py", line 732, in url_for
    url = url_adapter.build(endpoint, values, method=_method, force_external=_external)
  File "/home/albinr/.local/lib/python3.10/site-packages/werkzeug/routing/map.py", line 924, in build
    raise BuildError(endpoint, values, method, self)
werkzeug.routing.exceptions.BuildError: Could not build url for endpoint 'auth_routes.login'. Did you mean 'routes.auth_routes.login' instead?
